{"version":3,"sources":["uni-app:///main.js",null,"webpack:////Users/zhaolei/Documents/zhaolei_project/HBuilderProjects/myrazz/pages/cardDetail/cardDetail.vue?8166","webpack:////Users/zhaolei/Documents/zhaolei_project/HBuilderProjects/myrazz/pages/cardDetail/cardDetail.vue?58ed","webpack:////Users/zhaolei/Documents/zhaolei_project/HBuilderProjects/myrazz/pages/cardDetail/cardDetail.vue?6046","uni-app:///pages/cardDetail/cardDetail.vue","webpack:////Users/zhaolei/Documents/zhaolei_project/HBuilderProjects/myrazz/pages/cardDetail/cardDetail.vue?37e2","webpack:////Users/zhaolei/Documents/zhaolei_project/HBuilderProjects/myrazz/pages/cardDetail/cardDetail.vue?fef9"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","mixins","components","cardBox","data","words","cat","currentIndex","totalWord","allCards","currentPage","pageSize","isLoading","sysHeight","sysWidth","apiHost","startX","startY","isFavorite","computed","visibleCards","currentShowWordInfo","onLoad","uni","title","console","methods","loadData","wordlist","icon","duration","checkNeedLoadMore","getWordsByCat","url","method","page","perPage","filter","result","items","totalItems","playCurrentCardSound","updateFavoriteStatus","swipeLeft","playSound","toggleFavorite","favoriteWords","swipeRight","showNextCard","content","showCancel","success","tapCard","touchStart","touchMove","showPrevCard","touchend"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,mBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmI;AACnI;AAC8D;AACL;AACsC;;;AAG/F;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,iGAAM;AACR,EAAE,0GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAu1B,CAAgB,wyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACkE32B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAGA;EACAC;EACAC;IAAAC;EAAA;EACAC;IACA;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA;QACA;MACA;MACA;IACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IACAC;MACAC;IACA;IACA;IAEA;IACA;IACA;;IAEA;IACA;MACA;IACA;MACAC;MACA;IACA;;IAEA;IACA;EACA;EACAC;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAEA;gBAAA;gBAAA,OACA;cAAA;gBAAAC;gBACA;gBAEA;kBACA;kBACA;kBACA;;kBAEA;kBACA;oBACA;oBACA;oBACA;kBACA;;kBAEA;kBACA;gBACA;kBACA;kBACAL;oBACAC;oBACAK;oBACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAC;MACA;MACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEAT;kBACAU;kBACAC;kBACA9B;oBACA+B;oBACAC;oBACAC;kBACA;gBACA;cAAA;gBARAC;gBAAA,MASAA;kBAAA;kBAAA;gBAAA;gBAAA,kCACAA;cAAA;gBAEAb;gBACAF;kBACAC;kBACAK;gBACA;gBAAA,kCACA;kBAAAU;kBAAAC;gBAAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAf;gBACAF;kBACAC;kBACAK;gBACA;gBAAA,kCACA;kBAAAU;kBAAAC;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAC;MACA,kEACA;QACA;MACA;QACAhB;MACA;IACA;IAEA;IACAiB;MACA,oEACA;IACA;IAEA;IACAC;MACA;QACA;QACA;MACA;IACA;IAEAC;MACA;IACA;IACAC;MAAA;MACA;MACA;;MAEA;MACA;QACA;QACA;UACA;UACA;UAEA;YACA;YACAC;YACAvB;cACAC;cACAK;cACAC;YACA;UACA;YACA;YACAgB;cAAA;YAAA;YACAvB;cACAC;cACAK;cACAC;YACA;UACA;;UAEA;UACAP;QACA;UACAE;QACA;MACA;IACA;IACA;IACAsB;MACA;QACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;QACA;QACAzB;UACA0B;UACAC;UACAC;YACA;cACA;cACA;cACA;cACA;cACA;YACA;UACA;QACA;QACA;MACA;;MAEA;MACA;;MAEA;MACA;;MAEA;MACA;;MAEA;MACA;IACA;IACAC;MACA;MACA;QACA;MACA;QACA3B;MACA;IACA;IAEA;IACA4B;MACA;MACA;IACA;IAEA;IACAC;MACA;MAEA;MACA;;MAEA;MACA;MACA;;MAEA;MACA;QACA;MACA;QACA;MACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;QACAhC;UACAC;UACAK;UACAC;QACA;QACA;MACA;;MAEA;MACA;;MAEA;MACA;;MAEA;MACA;IACA;IAEA;IACA0B;MACA;MAEA;MACA;;MAEA;MACA;QACA;QACA;MACA;QACA;QACA;QACA;MACA;QACA;QACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC1XA;AAAA;AAAA;AAAA;AAA0lD,CAAgB,+7CAAG,EAAC,C;;;;;;;;;;;ACA9mD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/cardDetail/cardDetail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/cardDetail/cardDetail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cardDetail.vue?vue&type=template&id=5fbbb4a6&scoped=true&\"\nvar renderjs\nimport script from \"./cardDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./cardDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cardDetail.vue?vue&type=style&index=0&id=5fbbb4a6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fbbb4a6\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/cardDetail/cardDetail.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cardDetail.vue?vue&type=template&id=5fbbb4a6&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cardDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cardDetail.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"page\" :style=\"{ height: `${sysHeight}px`, width: `${sysWidth}px` }\">\n\t\t<view class=\"titleView\" :style=\"{ bottom: `${100}px` }\">\n\t\t\t{{currentIndex+1}}/{{totalWord}}\n\t\t</view>\n\t\t\n\t\t<view\n\t\t\tv-for=\"(item, index) in visibleCards\"\n\t\t\tclass=\"move-view\"\n\t\t\t:key=\"index\"\n\t\t\t@touchend=\"touchend\"\n\t\t\t@tap.stop=\"tapCard(item)\"\n\t\t\t@touchmove=\"touchMove\"\n\t\t\t@touchstart=\"touchStart\"\n\t\t\t:style=\"{\n\t\t\t\ttransform: index === 0 ? 'none' : `translateY(${index * 10}px) scale(${1 - index * 0.05})`,\n\t\t\t\tzIndex: `${9999 - index}`,\n\t\t\t\topacity: index < 3 ? `${1 - index * 0.1}` : '0.7'\n\t\t\t}\"\n\t\t>\n\t\t\t<view class=\"cardBox\">\n\t\t\t\t<card-box \n\t\t\t\t\t:thumbnail=\"item && item.thumbnail ? `${apiHost}api/files/${item.collectionId}/${item.id}/${item.thumbnail}` : ''\" \n\t\t\t\t\t:bgColor=\"item ? item.bgColor : ''\" \n\t\t\t\t\t:en=\"item ? item.en : ''\" \n\t\t\t\t\t:zh=\"item ? item.zh : ''\" \n\t\t\t\t\t:phonetic=\"item ? item.phonetic : ''\" \n\t\t\t\t\tref=\"cardBox\">\n\t\t\t\t</card-box>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 底部操作按钮 -->\n\t\t<view class=\"action-buttons\">\n\t\t\t<!-- 左箭头按钮 -->\n\t\t\t<view class=\"action-btn-wrapper\" @tap.stop=\"swipeRight\">\n\t\t\t\t<view class=\"action-btn\">\n\t\t\t\t\t<image src=\"/static/icons/left.png\" mode=\"aspectFit\"></image>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 播放按钮 -->\n\t\t\t<view class=\"action-btn-wrapper\" @tap.stop=\"playSound\">\n\t\t\t\t<view class=\"action-btn\">\n\t\t\t\t\t<image src=\"/static/icons/play.png\" mode=\"aspectFit\"></image>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 收藏按钮 -->\n\t\t\t<view class=\"action-btn-wrapper\" @tap.stop=\"toggleFavorite\">\n\t\t\t\t<view class=\"action-btn\">\n\t\t\t\t\t<image :src=\"isFavorite ? '/static/icons/like_active.png' : '/static/icons/like.png'\" mode=\"aspectFit\"></image>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 右箭头按钮 -->\n\t\t\t<view class=\"action-btn-wrapper\" @tap.stop=\"swipeLeft\">\n\t\t\t\t<view class=\"action-btn\">\n\t\t\t\t\t<image src=\"/static/icons/right.png\" mode=\"aspectFit\"></image>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport wordbiz from '@/components/wordbiz/wordbiz.js';\nimport cardBox from './card-box';\n\nexport default {\n\tmixins: [wordbiz],\n\tcomponents: { cardBox },\n\tdata() {\n\t\treturn {\n\t\t\twords:[],\n\t\t\tcat:\"\",\n\t\t\tcurrentIndex: 0, // 当前显示的卡片索引\n\t\t\ttotalWord: 0,\n\t\t\tallCards: [], // 存储所有获取到的卡片\n\t\t\tcurrentPage: 1, // 当前页码\n\t\t\tpageSize: 10, // 每页数量\n\t\t\tisLoading: false, // 是否正在加载数据\n\t\t\tsysHeight: 0,\n\t\t\tsysWidth: 0,\n\t\t\tapiHost:'http://www.word.heluobo.top/',\n\t\t\tstartX: 0,\n\t\t\tstartY: 0,\n\t\t\tisFavorite: false\n\t\t};\n\t},\n\tcomputed: {\n\t\t// 当前要显示的卡片（当前卡片及后面的几张）\n\t\tvisibleCards() {\n\t\t\t// 确保allCards已加载并且不为空\n\t\t\tif (!this.allCards || this.allCards.length === 0) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn this.allCards.slice(this.currentIndex, this.currentIndex + 5);\n\t\t},\n\t\t// 当前显示的卡片信息\n\t\tcurrentShowWordInfo() {\n\t\t\treturn this.allCards[this.currentIndex] || null;\n\t\t}\n\t},\n\tonLoad(options) {\n\t\tuni.setNavigationBarTitle({\n\t\t\ttitle:options.title\n\t\t})\n\t\tthis.cat = options.cat;\n\t\t\n\t\tconst sysInfo = uni.getSystemInfoSync();\n\t\tthis.sysHeight = sysInfo.windowHeight;\n\t\tthis.sysWidth = sysInfo.windowWidth;\n\t\t\n\t\t// 检查是否有收藏的单词列表\n\t\ttry {\n\t\t\tthis.favoriteWords = uni.getStorageSync('favoriteWords') || [];\n\t\t} catch (e) {\n\t\t\tconsole.error('获取收藏列表失败:', e);\n\t\t\tthis.favoriteWords = [];\n\t\t}\n\t\t\n\t\t// 加载第一页数据\n\t\tthis.loadData();\n\t},\n\tmethods: {\n\t\t// 加载数据\n\t\tasync loadData() {\n\t\t\tif (this.isLoading) return;\n\t\t\t\n\t\t\tthis.isLoading = true;\n\t\t\tconst wordlist = await this.getWordsByCat(this.cat, this.currentPage, this.pageSize);\n\t\t\tthis.isLoading = false;\n\t\t\t\n\t\t\tif (wordlist.items && wordlist.items.length > 0) {\n\t\t\t\t// 将获取到的卡片添加到allCards数组\n\t\t\t\tthis.allCards = this.allCards.concat(wordlist.items);\n\t\t\t\tthis.totalWord = wordlist.totalItems;\n\t\t\t\t\n\t\t\t\t// 如果是第一页，播放第一张卡片的语音\n\t\t\t\tif (this.currentPage === 1 && this.currentIndex === 0) {\n\t\t\t\t\t// 检查当前单词是否在收藏列表中\n\t\t\t\t\tthis.updateFavoriteStatus();\n\t\t\t\t\tthis.playCurrentCardSound();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 更新当前页码\n\t\t\t\tthis.currentPage++;\n\t\t\t} else if (this.currentPage === 1) {\n\t\t\t\t// 第一页没有数据时显示提示\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '该分类暂无单词数据',\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 2000\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 检查是否需要加载更多数据\n\t\tcheckNeedLoadMore() {\n\t\t\t// 如果当前索引接近末尾，并且还有更多数据可以加载，则加载下一页\n\t\t\tif (this.currentIndex >= this.allCards.length - 3 && this.allCards.length < this.totalWord) {\n\t\t\t\tthis.loadData();\n\t\t\t}\n\t\t},\n\t\tasync getWordsByCat(cat,page,page_size){\n\t\t\ttry {\n\t\t\t\tvar result = await uni.request({\n\t\t\t\t\turl: this.apiHost + 'api/collections/word/records',\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tpage : page,\n\t\t\t\t\t\tperPage : page_size,\n\t\t\t\t\t\tfilter : `cat=\"${cat}\"`,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (result.statusCode === 200) {\n\t\t\t\t\treturn result.data;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('获取单词数据失败:', result);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '获取单词数据失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\treturn {items: [], totalItems: 0};\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('请求单词数据异常:', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '网络错误，请重试',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn {items: [], totalItems: 0};\n\t\t\t}\n\t\t},\n\t\t// 播放当前卡片的声音\n\t\tplayCurrentCardSound() {\n\t\t\tif (this.currentShowWordInfo && this.currentShowWordInfo.voice && \n\t\t\t\tthis.currentShowWordInfo.collectionId && this.currentShowWordInfo.id) {\n\t\t\t\tthis.ScanAudio(`${this.apiHost}api/files/${this.currentShowWordInfo.collectionId}/${this.currentShowWordInfo.id}/${this.currentShowWordInfo.voice}`);\n\t\t\t} else if (this.currentShowWordInfo) {\n\t\t\t\tconsole.warn('无法播放声音：当前卡片数据不完整', this.currentShowWordInfo);\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 更新收藏状态\n\t\tupdateFavoriteStatus() {\n\t\t\tthis.isFavorite = this.favoriteWords && this.currentShowWordInfo && \n\t\t\t\tthis.favoriteWords.includes(this.currentShowWordInfo.id);\n\t\t},\n\t\t\n\t\t// 向左滑动 - 显示下一张卡片\n\t\tswipeLeft() {\n\t\t\tif (this.$refs.cardBox && this.$refs.cardBox[0]) {\n\t\t\t\tthis.$refs.cardBox[0].moveLeft(1);\n\t\t\t\tthis.showNextCard();\n\t\t\t}\n\t\t},\n\t\t\n\t\tplaySound() {\n\t\t\tthis.playCurrentCardSound();\n\t\t},\n\t\ttoggleFavorite() {\n\t\t\t// 切换收藏状态\n\t\t\tthis.isFavorite = !this.isFavorite;\n\t\t\t\n\t\t\t// 如果当前有单词信息\n\t\t\tif (this.currentShowWordInfo) {\n\t\t\t\t// 这里可以添加保存收藏状态的逻辑，例如保存到本地存储\n\t\t\t\ttry {\n\t\t\t\t\t// 获取已收藏单词列表\n\t\t\t\t\tlet favoriteWords = uni.getStorageSync('favoriteWords') || [];\n\t\t\t\t\t\n\t\t\t\t\tif (this.isFavorite) {\n\t\t\t\t\t\t// 添加到收藏\n\t\t\t\t\t\tfavoriteWords.push(this.currentShowWordInfo.id);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '已添加到收藏',\n\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\tduration: 1500\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 从收藏中移除\n\t\t\t\t\t\tfavoriteWords = favoriteWords.filter(id => id !== this.currentShowWordInfo.id);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '已取消收藏',\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\tduration: 1500\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 保存更新后的收藏列表\n\t\t\t\t\tuni.setStorageSync('favoriteWords', favoriteWords);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error('保存收藏状态失败:', e);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// 向右滑动 - 显示上一张卡片\n\t\tswipeRight() {\n\t\t\tif (this.allCards.length > 0 && this.$refs.cardBox && this.$refs.cardBox[0]) {\n\t\t\t\tthis.$refs.cardBox[0].moveRight(1);\n\t\t\t\tthis.showPrevCard();\n\t\t\t}\n\t\t},\n\t\t// 显示下一张卡片\n\t\tshowNextCard() {\n\t\t\t// 检查是否已经到最后一张\n\t\t\tif (this.currentIndex >= this.totalWord - 1) {\n\t\t\t\tthis.ScanAudio('/static/voice/sound_unbelievable.mp3');\n\t\t\t\tuni.showModal({\n\t\t\t\t\tcontent: '已经学完，是否再来一遍？',\n\t\t\t\t\tshowCancel: true,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t// 重置索引和数据\n\t\t\t\t\t\t\tthis.currentIndex = 0;\n\t\t\t\t\t\t\tthis.allCards = [];\n\t\t\t\t\t\t\tthis.currentPage = 1;\n\t\t\t\t\t\t\tthis.loadData();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 更新当前索引\n\t\t\tthis.currentIndex++;\n\t\t\t\n\t\t\t// 检查是否需要加载更多数据\n\t\t\tthis.checkNeedLoadMore();\n\t\t\t\n\t\t\t// 更新收藏状态\n\t\t\tthis.updateFavoriteStatus();\n\t\t\t\n\t\t\t// 播放声音\n\t\t\tthis.playCurrentCardSound();\n\t\t},\n\t\ttapCard(item) {\n\t\t\t// 添加检查确保item及其必要属性存在\n\t\t\tif (item && item.collectionId && item.id && item.voice_slow) {\n\t\t\t\tthis.ScanAudio(`${this.apiHost}api/files/${item.collectionId}/${item.id}/${item.voice_slow}`);\n\t\t\t} else {\n\t\t\t\tconsole.warn('无法播放声音：卡片数据不完整', item);\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 触摸开始\n\t\ttouchStart(e) {\n\t\t\tthis.startX = e.touches[0].clientX;\n\t\t\tthis.startY = e.touches[0].clientY;\n\t\t},\n\t\t\n\t\t// 触摸移动\n\t\ttouchMove(e) {\n\t\t\tif (this.allCards.length == 0 || !this.$refs.cardBox || !this.$refs.cardBox[0]) return;\n\t\t\t\n\t\t\tlet moveX = e.touches[0].clientX - this.startX;\n\t\t\tlet moveY = e.touches[0].clientY - this.startY;\n\t\t\t\n\t\t\t// 计算移动比例\n\t\t\tlet ratio = Math.abs(moveX) / 100;\n\t\t\tif (ratio > 1) ratio = 1;\n\t\t\t\n\t\t\t// 判断移动方向\n\t\t\tif (moveX > 20) {\n\t\t\t\tthis.$refs.cardBox[0].moveRight(ratio);\n\t\t\t} else if (moveX < -20) {\n\t\t\t\tthis.$refs.cardBox[0].moveLeft(ratio);\n\t\t\t} else {\n\t\t\t\tthis.$refs.cardBox[0].moveCenter();\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 显示上一张卡片\n\t\tshowPrevCard() {\n\t\t\t// 检查是否已经是第一张\n\t\t\tif (this.currentIndex <= 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '已经是第一张卡片',\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 1500\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 更新当前索引\n\t\t\tthis.currentIndex--;\n\t\t\t\n\t\t\t// 更新收藏状态\n\t\t\tthis.updateFavoriteStatus();\n\t\t\t\n\t\t\t// 播放声音\n\t\t\tthis.playCurrentCardSound();\n\t\t},\n\t\t\n\t\t// 触摸结束\n\t\ttouchend(e) {\n\t\t\tif (this.allCards.length == 0 || !this.$refs.cardBox || !this.$refs.cardBox[0]) return;\n\t\t\t\n\t\t\tlet moveX = e.changedTouches[0].clientX - this.startX;\n\t\t\tlet moveY = e.changedTouches[0].clientY - this.startY;\n\t\t\t\n\t\t\t// 判断结束动作\n\t\t\tif (Math.abs(moveX) < 40) {\n\t\t\t\t// 移动距离太小，恢复原位\n\t\t\t\tthis.$refs.cardBox[0]._back();\n\t\t\t} else if (moveX > 0) {\n\t\t\t\t// 右滑，显示上一张\n\t\t\t\tthis.$refs.cardBox[0].clearAnimation();\n\t\t\t\tthis.showPrevCard();\n\t\t\t} else {\n\t\t\t\t// 左滑，显示下一张\n\t\t\t\tthis.$refs.cardBox[0].clearAnimation();\n\t\t\t\tthis.showNextCard();\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.page {\n\twidth: 100%;\n\tposition: absolute;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.titleView {\n\tposition: absolute;\n\twidth: 100%;\n\ttext-align: center;\n\tz-index: 999;\n}\n\n.move-view {\n\twidth: 600rpx;\n\tposition: absolute;\n\theight: 1200rpx;\n\tleft: 50%;\n\ttop: 50%;\n\tmargin-left: -300rpx;\n\tmargin-top: -600rpx;\n\ttransition: all 0.3s ease;\n}\n\n.cardBox {\n\tposition: relative;\n\twidth: 600rpx;\n\theight: 1000rpx;\n}\n\n.action-buttons {\n\tposition: fixed;\n\tbottom: 40px;\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: space-around;\n\tpadding: 0 20px;\n\tz-index: 99;\n}\n\n.action-btn-wrapper {\n\t/* 确保包装器有足够大的点击区域 */\n\tpadding: 10px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tz-index: 200;\n}\n\n.action-btn {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground: rgba(255, 255, 255, 0.95);\n\tborder-radius: 40px;\n\twidth: 80px;\n\theight: 80px;\n\tbox-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);\n\tborder: none;\n\ttransition: all 0.2s ease;\n\t-webkit-font-smoothing: antialiased;\n\t-moz-osx-font-smoothing: grayscale;\n\ttransform: translateZ(0);\n\tbackface-visibility: hidden;\n\tposition: relative;\n\tcursor: pointer;\n\t\n\timage, svg {\n\t\twidth: 36px;\n\t\theight: 36px;\n\t\tpointer-events: none;\n\t}\n}\n\n.action-btn-wrapper:active .action-btn {\n\tbackground: rgba(245, 245, 245, 0.95);\n\ttransform: translateZ(0) scale(0.92);\n\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n}\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cardDetail.vue?vue&type=style&index=0&id=5fbbb4a6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cardDetail.vue?vue&type=style&index=0&id=5fbbb4a6&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1749102312340\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}